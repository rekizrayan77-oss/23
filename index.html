<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Fus√©e Spatiale Deluxe</title>
<style>
body {
  margin:0; padding:0; height:100vh; overflow:hidden;
  font-family:Arial,sans-serif;
  background:linear-gradient(180deg,#000428,#004e92);
  color:white;
}
#gameContainer{position:relative;width:100%;height:100%;display:flex;justify-content:center;align-items:center;}
canvas{background:radial-gradient(circle,#001a33,#000);border:3px solid #00d4ff;box-shadow:0 0 30px #00d4ff80;}
#screen{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#000000dd;z-index:10;}
button{padding:12px 35px;margin:8px;font-size:20px;border:none;border-radius:50px;cursor:pointer;background:linear-gradient(135deg,#667eea,#764ba2);color:white;font-weight:bold;}
#scoreDisplay{position:absolute;top:20px;left:20px;font-size:24px;}
#pauseBtn{position:absolute;top:20px;right:20px;display:none;}
.bonusBarContainer{position:absolute;bottom:10px;left:50%;transform:translateX(-50%);display:none;gap:10px;}
.bar{width:120px;height:15px;border:2px solid #fff;border-radius:10px;overflow:hidden;}
.barInner{height:100%;width:100%;transition:width 0.1s linear;}
</style>
</head>
<body>
<div id="gameContainer">
  <div id="scoreDisplay" style="display:none;">Score: <span id="score">0</span></div>
  <button id="pauseBtn" style="display:none;">‚è∏ Pause</button>
  <div id="screen"><h1>üöÄ Fus√©e Spatiale üöÄ</h1><button id="startBtn">D√©marrer</button></div>
  <canvas id="game" width="600" height="800"></canvas>
  <div class="bonusBarContainer" id="bonusBars">
    <div class="bar" id="shieldBar"><div class="barInner" style="background:#00caff;width:0%;"></div></div>
    <div class="bar" id="laserBar"><div class="barInner" style="background:#ff3333;width:0%;"></div></div>
  </div>
</div>
<script>
let screen=document.getElementById("screen");
let canvas=document.getElementById("game");
let ctx=canvas.getContext("2d");
let scoreDisplay=document.getElementById("scoreDisplay");
let pauseBtn=document.getElementById("pauseBtn");
let scoreSpan=document.getElementById("score");
let bonusBars=document.getElementById("bonusBars");
let shieldBar=document.querySelector('#shieldBar .barInner');
let laserBar=document.querySelector('#laserBar .barInner');

let pseudo="", score=0, mode="solo", difficulty="easy";
let gameRunning=false, gamePaused=false;
let keys={}, lasers=[], asteroids=[], bonuses=[], particleList=[], iaPlayers=[];
let asteroidSpawnTimer=0, asteroidSpawnInterval=60;
let laserCooldown=0, nextBonusTrigger=100;
let player={x:280,y:740,w:40,h:60,shield:false,laser:false,shieldEnd:0,laserEnd:0};

function drawRocket(p,isPlayer=true){
  // Fus√©e triangulaire inspir√©e de l‚Äôimage fournie
  let grad=ctx.createLinearGradient(p.x,p.y,p.x,p.y+p.h);
  grad.addColorStop(0,"#00bfff");
  grad.addColorStop(1,"#0077ff");
  ctx.fillStyle=grad;
  ctx.beginPath();
  ctx.moveTo(p.x+p.w/2,p.y); // nez
  ctx.lineTo(p.x+p.w,p.y+p.h*0.7);
  ctx.lineTo(p.x+p.w*0.75,p.y+p.h);
  ctx.lineTo(p.x+p.w*0.25,p.y+p.h);
  ctx.lineTo(p.x,p.y+p.h*0.7);
  ctx.closePath();
  ctx.fill();
  // cockpit
  ctx.fillStyle="#88d7ff";
  ctx.beginPath();
  ctx.arc(p.x+p.w/2,p.y+p.h*0.4,p.w*0.15,0,Math.PI*2);
  ctx.fill();
  // flamme moteur
  ctx.fillStyle="#ffcc33";
  ctx.beginPath();
  ctx.moveTo(p.x+p.w*0.25,p.y+p.h);
  ctx.lineTo(p.x+p.w*0.5,p.y+p.h+15+Math.random()*5);
  ctx.lineTo(p.x+p.w*0.75,p.y+p.h);
  ctx.closePath();
  ctx.fill();
  // bouclier
  if(p.shield){
    let r=35+Math.sin(Date.now()/120)*3;
    ctx.strokeStyle="#00caff";
    ctx.lineWidth=3;
    ctx.beginPath();
    ctx.arc(p.x+p.w/2,p.y+p.h/2,r,0,Math.PI*2);
    ctx.stroke();
  }
}

function updateBonusBars(){
  let now=Date.now();
  let active=false;
  if(player.shield){
    let remain=Math.max(0,player.shieldEnd-now);
    shieldBar.style.width=(remain/15000*100)+"%";
    active=true;
  } else shieldBar.style.width="0%";
  if(player.laser){
    let remain=Math.max(0,player.laserEnd-now);
    laserBar.style.width=(remain/15000*100)+"%";
    active=true;
  } else laserBar.style.width="0%";
  bonusBars.style.display = active ? 'flex' : 'none';
}

function useBonus(p,type){
  if(type==="shield"){p.shield=true;p.shieldEnd=Date.now()+15000;}
  if(type==="laser"){p.laser=true;p.laserEnd=Date.now()+15000;}
}

function update(){
  if(!gameRunning||gamePaused)return;
  ctx.clearRect(0,0,600,800);
  drawRocket(player,true);
  updateBonusBars();
  requestAnimationFrame(update);
}

document.getElementById("startBtn").onclick=()=>{screen.style.display='none';gameRunning=true;update();};
</script>
</body>
</html>
